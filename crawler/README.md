存放爬虫，可以同时被前端和后端使用。部分爬虫可以同时在服务器
端和浏览器端运行。

## 爬虫编写要求

### 爬虫源代码

- 存放在 [./crawlers/](./crawlers/) 目录中
- 一个文件存放一个爬虫的源代码
- 文件名只能包含大小写英文字母、下划线和数字，且不能以数字开头
- 爬虫使用 superagent 来收发请求，使用 cheerio 来解析请求
- 将 `module.exports` 赋值成爬虫函数即可导出爬虫
- 原则上不建议再引入其他的库。如果需要让爬虫在浏览器上运行，
    不能导入项目中的其他源代码。
- 爬虫函数中可以抛出任何异常（例如“用户不存在”），系统将会正确
    处理这些异常。

#### 爬虫函数格式

参数：
- options: {Object} - 爬虫的参数，可以在 `config.yml` 中配置，参见下文
- username: {String} - 要爬取题量的用户名

返回值:
返回一个对象，其中包含两个属性
- solved: {Number} - 用户在此网站上解决的题目数量
- submissions: {Number} - 用户在此网站上的总提交数

### 配置文件

- 配置文件用来注册爬虫、确定爬虫类型和给爬虫提供额外信息
- 纳入版本控制的只有 `config.template.yml` 文件，程序运行
    时会据此生成 `config.yml` 文件。因为部分爬虫需要一些隐私
    信息才能运行（例如 vjudge 就需要一个帐号的用户名和密码才能
    访问其 API）。如果您需要在您的服务器上部署此项目，需要分别
    填写 `config.yml` 中的配置项才能正常运行。
- 请注意，如果您需要在 config 中填写隐私信息，请将爬虫设置成
    server_only。否则编译出的前端静态文件中将会含有您的隐私信息。
    
#### 配置文件格式

- crawlers: 是一个列表，含有所有爬虫的配置项

crawlers 中的每一项都是一个字典，其中包含以下字段：
- name: {String} - 爬虫的名字，必须跟 crawlers 文件夹中的爬虫文件名相同
    （不需要含有 `js` 后缀名）。系统将根据这里的配置文件装配
    爬虫，也就是说只要在配置文件中删除此字段，本爬虫就不会被装配，
    不会出现在前端或后端中
- server_only: {Boolean} - 如果省略，为 false。
    本字段表示爬虫是否只出现在服务器中。
    如果为true，爬虫在前端的代码将是一个对服务器的api请求。
    即不会在前端进行爬取，只在服务器运行此爬虫。
- meta: 元信息，包含标题等等的信息，可以显示在前端或者用在爬虫API中
  - title: {String} - OJ名，这是显示在前端上作为标题的
  - description: {String} - OJ的说明，可以补充一些信息，会在前端显示出来。这是可选的
  - url: {String} - 到OJ的链接，也是可选的。
- 其他字段: 配置文件中可以包含任何其他字段

在运行爬虫时，crawlers中的每一项都会被传递给相应的爬虫（从
options 形参），爬虫可以在运行时读取相应的参数。

您写在 meta 字段中的内容会被编译进前端页面，无论爬虫是否为 server_only

### 额外信息

在爬虫的 config 属性里也会被传入额外的信息，此信息会在 configReader 中自动生成，也可以被
配置文件中的同名字段覆盖。

- env: {String} - 当前爬虫在哪里运行
  - 'server': 如果爬虫函数正在服务器上运行，传入此值
  - 'browser': 浏览器……

### 参考

您可以参考 poj 爬虫和 vjudge 爬虫来编写您的爬虫，这两个分别是
前后端通用爬虫和server_only爬虫。

## 测试

`test/crawlers.test.js` 中有爬虫的测试文件，原则上测试用例应该至少覆盖主路径
